"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[799],{91799:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(32735),r=n(60216),s=n.n(r),i=n(31492),l=n(84334),o=n(12742),c=n(38942),m=n(61533),u=n(43418);const{formatDate:d}=i.default;function p(e){const{children:t,displaySets:n,viewportIndex:r,viewportLabel:s,servicesManager:i,extensionManager:p,commandsManager:f,viewportOptions:g}=e,{t:S}=(0,c.$G)("TrackedViewport"),{measurementService:v,cornerstoneViewportService:w}=i.services,b=n[0],[E]=(0,u.I)(),[h]=(0,o.en)(),[x,y]=(0,a.useState)(!1),[k,N]=(0,a.useState)(null),{trackedSeries:I}=E.context,D=g.viewportId,{Modality:M,SeriesDate:P,SeriesDescription:T,SeriesInstanceUID:V,SeriesNumber:C}=b,{PatientID:F,PatientName:O,PatientSex:R,PatientAge:j,SliceThickness:A,SpacingBetweenSlices:U,ManufacturerModelName:q}=b.images[0];(0,a.useEffect)((()=>x?(m.Z.setViewportToolStyles(D,{global:{lineDash:""}}),void w.getRenderingEngine().renderViewport(D)):(m.Z.setViewportToolStyles(D,{global:{lineDash:"4,4"}}),w.getRenderingEngine().renderViewport(D),()=>{m.Z.setViewportToolStyles(D,{})})),[x]),I.includes(V)!==x&&y(!x);return a.createElement(a.Fragment,null,a.createElement(o.uY,{onDoubleClick:e=>{e.stopPropagation(),e.preventDefault()},useAltStyling:x,onArrowsClick:e=>function(e){const t=function(e,t,n,a){const{measurementService:r,viewportGridService:s}=t.services,i=r.getMeasurements(),{activeViewportIndex:l,viewports:o}=s.getState(),{displaySetInstanceUIDs:c}=o[l],{trackedSeries:m}=a.context,u=i.filter((e=>m.includes(e.referenceSeriesUID)&&c.includes(e.displaySetInstanceUID)));if(!u.length)return;const d=u.length,p=u.map((e=>e.uid));let f=p.findIndex((e=>e===n));return-1===f?f=0:"left"===e?(f--,f<0&&(f=d-1)):"right"===e&&(f++,f===d&&(f=0)),p[f]}(e,i,k,E);t&&(N(t),v.jumpToMeasurement(r,t))}(e),getStatusComponent:()=>function(e){const t=e?"status-tracked":"status-untracked";return a.createElement("div",{className:"relative"},a.createElement(o.u,{position:"bottom-left",content:a.createElement("div",{className:"flex py-2"},a.createElement("div",{className:"flex pt-1"},a.createElement(o.JO,{name:"info-link",className:"w-4 text-primary-main"})),a.createElement("div",{className:"flex ml-4"},a.createElement("span",{className:"text-base text-common-light"},e?a.createElement(a.Fragment,null,"Series is",a.createElement("span",{className:"font-bold text-white"}," tracked")," and can be viewed ",a.createElement("br",null)," in the measurement panel"):a.createElement(a.Fragment,null,"Measurements for",a.createElement("span",{className:"font-bold text-white"}," untracked "),"series ",a.createElement("br",null)," will not be shown in the ",a.createElement("br",null)," measurements panel"))))},a.createElement(o.JO,{name:t,className:"text-primary-light"})))}(x),studyData:{label:s,studyDate:d(P),currentSeries:C,seriesDescription:T,patientInformation:{patientName:O?l.default.utils.formatPN(O):"",patientSex:R||"",patientAge:j||"",MRN:F||"",thickness:A?`${parseFloat(A).toFixed(2)}mm`:"",spacing:void 0!==U?`${parseFloat(U).toFixed(2)}mm`:"",scanner:q||""}}}),a.createElement("div",{className:"relative flex flex-row w-full h-full overflow-hidden"},(()=>{const{component:t}=p.getModuleEntry("@ohif/extension-cornerstone.viewportModule.cornerstone");return a.createElement(t,e)})(),a.createElement("div",{className:"absolute w-full"},h.viewportIndex===r&&a.createElement(o.P_,{id:h.id,message:h.message,type:h.type,actions:h.actions,onSubmit:h.onSubmit,onOutsideClick:h.onOutsideClick}))))}p.propTypes={displaySets:s().arrayOf(s().object.isRequired).isRequired,viewportIndex:s().number.isRequired,dataSource:s().object,children:s().node,customProps:s().object},p.defaultProps={customProps:{}};const f=p}}]);