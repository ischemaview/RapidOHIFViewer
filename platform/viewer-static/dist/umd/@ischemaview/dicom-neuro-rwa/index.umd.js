!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(require("@ohif/ui")):"function"==typeof define&&define.amd?define("@ischemaview/dicom-neuro-rwa",["@ohif/ui"],o):"object"==typeof exports?exports["@ischemaview/dicom-neuro-rwa"]=o(require("@ohif/ui")):e["@ischemaview/dicom-neuro-rwa"]=o(e["@ohif/ui"])}("undefined"!=typeof self?self:this,(e=>(()=>{"use strict";var o={214:o=>{o.exports=e}},t={};function n(e){var i=t[e];if(void 0!==i)return i.exports;var a=t[e]={exports:{}};return o[e](a,a.exports,n),a.exports}n.d=(e,o)=>{for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{default:()=>w});const e={1:{description:"Brain",window:"80",level:"40"},2:{description:"Subdural",window:"300",level:"100"},3:{description:"Stroke",window:"40",level:"40"},4:{description:"Soft Tissue",window:"400",level:"60"},5:{description:"Temporal Bones",window:"2800",level:"600"}},o=[{commandName:"setToolActive",commandOptions:{toolName:"Zoom"},label:"Zoom",keys:["z"],isEditable:!0},{commandName:"scaleUpViewport",label:"Zoom In",keys:["+"],isEditable:!0},{commandName:"scaleDownViewport",label:"Zoom Out",keys:["-"],isEditable:!0},{commandName:"fitViewportToWindow",label:"Zoom to Fit",keys:["="],isEditable:!0},{commandName:"rotateViewportCW",label:"Rotate Right",keys:["r"],isEditable:!0},{commandName:"rotateViewportCCW",label:"Rotate Left",keys:["l"],isEditable:!0},{commandName:"flipViewportHorizontal",label:"Flip Horizontally",keys:["h"],isEditable:!0},{commandName:"flipViewportVertical",label:"Flip Vertically",keys:["v"],isEditable:!0},{commandName:"toggleCine",label:"Cine",keys:["c"]},{commandName:"invertViewport",label:"Invert",keys:["i"],isEditable:!0},{commandName:"incrementActiveViewport",label:"Next Image Viewport",keys:["right"],isEditable:!0},{commandName:"decrementActiveViewport",label:"Previous Image Viewport",keys:["left"],isEditable:!0},{commandName:"nextViewportDisplaySet",label:"Next Series",keys:["pageup"],isEditable:!0},{commandName:"previousViewportDisplaySet",label:"Previous Series",keys:["pagedown"],isEditable:!0},{commandName:"nextImage",label:"Next Image",keys:["down"],isEditable:!0},{commandName:"previousImage",label:"Previous Image",keys:["up"],isEditable:!0},{commandName:"firstImage",label:"First Image",keys:["home"],isEditable:!0},{commandName:"lastImage",label:"Last Image",keys:["end"],isEditable:!0},{commandName:"resetViewport",label:"Reset",keys:["space"],isEditable:!0},{commandName:"cancelMeasurement",label:"Cancel Cornerstone Measurement",keys:["esc"]},{commandName:"setWindowLevel",commandOptions:e[1],label:"W/L Preset 1",keys:["1"]},{commandName:"setWindowLevel",commandOptions:e[2],label:"W/L Preset 2",keys:["2"]},{commandName:"setWindowLevel",commandOptions:e[3],label:"W/L Preset 3",keys:["3"]}];var t=JSON.parse('{"u2":"@ischemaview/dicom-neuro-rwa"}').u2,a=n(214);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?l(Object(t),!0).forEach((function(o){m(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function m(e,o,t){return(o=function(e){var o=function(e,o){if("object"!==r(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===r(o)?o:String(o)}(o))in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function c(e,o,t,n,i,a){return{id:o,icon:t,label:n,type:e,commands:i,tooltip:a}}var d=c.bind(null,"action"),p=(c.bind(null,"toggle"),c.bind(null,"tool"));function u(o,t,n){return{id:o.toString(),title:t,subtitle:n,type:"action",commands:[{commandName:"setWindowLevel",commandOptions:s({},e[o]),context:"CORNERSTONE"}]}}function v(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,n=new Array(o);t<o;t++)n[t]=e[t];return n}var y="@ohif/extension-default.sopClassHandlerModule.stack",f="@ohif/extension-cornerstone-dicom-sr.sopClassHandlerModule.dicom-sr",b="@ohif/extension-dicom-video.sopClassHandlerModule.dicom-video",N="@ohif/extension-dicom-pdf.sopClassHandlerModule.dicom-pdf",S={"@ohif/extension-default":"^3.0.0","@ohif/extension-cornerstone":"^3.0.0","@ohif/extension-measurement-tracking":"^3.0.0","@ohif/extension-cornerstone-dicom-sr":"^3.0.0","@ohif/extension-dicom-pdf":"^3.0.1","@ohif/extension-dicom-video":"^3.0.1"};const w={id:t,modeFactory:function(e){return e.modeConfiguration,{id:t,routeName:"neuroRWA",displayName:"Neuro RWA",onModeEnter:function(e){var o,t=e.servicesManager,n=e.extensionManager,i=e.commandsManager,r=t.services,l=r.ToolBarService,s=r.ToolGroupService,m=r.SlabThicknessService,c=r.TouchService;m.init(),c.init(),function(e,o,t){!function(e,o,t){var n=e.getModuleEntry("@ohif/extension-cornerstone.utilityModule.tools").exports,i=n.toolNames,a=n.Enums,r={active:[{toolName:i.Zoom,bindings:[{numTouchPoints:2}]},{toolName:i.StackScroll,bindings:[{numTouchPoints:3}]},{toolName:i.WindowLevel,bindings:[{mouseButton:a.MouseBindings.Primary}]},{toolName:i.StackScrollMouseWheel,bindings:[]}],passive:[{toolName:i.Pan}]};o.createToolGroupAndAddTools("default",r,{})}(e,o)}(n,s),window.commandsManager=i,window.servicesManager=t;var v=s.subscribe(s.EVENTS.VIEWPORT_ADDED,(function(){l.recordInteraction({groupId:"WindowLevel",itemId:"WindowLevel",interactionType:"tool",commands:[{commandName:"setToolActive",commandOptions:{toolName:"WindowLevel"},context:"CORNERSTONE"}]}),o()}));o=v.unsubscribe,l.init(n),l.addButtons(function(e){var o=e.servicesManager.services.SlabThicknessService;return[{id:"MeasurementTools",type:"ohif.splitButton",props:{groupId:"MeasurementTools",isRadio:!0,primary:p("Length","tool-length","Length",[{commandName:"setToolActive",commandOptions:{toolName:"Length"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SRLength",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Length"),secondary:{icon:"chevron-down",label:"",isActive:!0,tooltip:"More Measure Tools"},items:[p("Length","tool-length","Length",[{commandName:"setToolActive",commandOptions:{toolName:"Length"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SRLength",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Length Tool"),p("Bidirectional","tool-bidirectional","Bidirectional",[{commandName:"setToolActive",commandOptions:{toolName:"Bidirectional"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SRBidirectional",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Bidirectional Tool"),p("ArrowAnnotate","tool-annotate","Annotation",[{commandName:"setToolActive",commandOptions:{toolName:"ArrowAnnotate"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SRArrowAnnotate",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Arrow Annotate"),p("EllipticalROI","tool-elipse","Ellipse",[{commandName:"setToolActive",commandOptions:{toolName:"EllipticalROI"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SREllipticalROI",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Ellipse Tool")]}},{id:"WindowLevel",type:"ohif.splitButton",props:{groupId:"WindowLevel",primary:p("WindowLevel","tool-window-level","Window Level",[{commandName:"setToolActive",commandOptions:{toolName:"WindowLevel"},context:"CORNERSTONE"}],"Window Level"),secondary:{icon:"chevron-down",label:"W/L Manual",isActive:!0,tooltip:"W/L Presets"},isAction:!0,renderer:a.WindowLevelMenuItem,items:[u(1,"Brain","80 / 40"),u(2,"Subdural","300 / 100"),u(3,"Stroke","40 / 40"),u(4,"Soft Tissue","400 / 60"),u(5,"Temporal Bones","2850 / 600")]}},{id:"Pan",type:"ohif.radioGroup",props:{type:"tool",icon:"tool-move",label:"Pan",commands:[{commandName:"setToolActive",commandOptions:{toolName:"Pan"},context:"CORNERSTONE"}]}},{id:"MoreTools",type:"ohif.splitButton",props:{isRadio:!0,groupId:"MoreTools",primary:d("Reset","tool-reset","Reset View",[{commandName:"resetViewport",commandOptions:{},context:"CORNERSTONE"}],"Reset"),secondary:{icon:"chevron-down",label:"",isActive:!0,tooltip:"More Tools"},items:[d("Reset","tool-reset","Reset View",[{commandName:"resetViewport",commandOptions:{},context:"CORNERSTONE"}],"Reset"),d("Zoom","tool-zoom","Zoom",[{commandName:"setToolActive",commandOptions:{toolName:"Zoom"},context:"CORNERSTONE"}],"Zoom"),d("Pan","tool-move","Pan",[{commandName:"setToolActive",commandOptions:{toolName:"Pan"},context:"CORNERSTONE"}],"Pan"),d("Stack-Scroll","tool-stack-scroll","Stack Scroll",[{commandName:"setToolActive",commandOptions:{toolName:"StackScroll"},context:"CORNERSTONE"}],"Stack Scroll")]}},{id:"setSlabThickness",type:"rapidai.range",props:{icon:"tool-crosshair",label:"Thickness",type:"action",min:0,max:30,value:.05,onChange:function(e){o.setSlabThickness(+e)}}}]}({servicesManager:t})),l.createButtonSection("primary",["WindowLevel","MoreTools"])},onModeExit:function(e){var o=e.servicesManager.services,t=o.ToolGroupService,n=o.SyncGroupService,i=o.MeasurementService,a=o.ToolBarService,r=o.SlabThicknessService,l=o.TouchService;a.reset(),i.clearMeasurements(),t.destroy(),n.destroy(),r.destroy(),l.destroy()},validationTags:{study:[],series:[]},isValidMode:function(e){return!e.modalities.split("\\").includes("SM")},routes:[{path:"neuroRWA",layoutTemplate:function(){return{id:"@ohif/extension-default.layoutTemplateModule.viewerLayout",props:{viewports:[{namespace:"@ischemaview/dicom-rapidai-extension.viewportModule.rapidai-cornerstone-neuro-rwa",displaySetsToDisplay:[y]},{namespace:"@ohif/extension-cornerstone-dicom-sr.viewportModule.dicom-sr",displaySetsToDisplay:[f]},{namespace:"@ohif/extension-dicom-video.viewportModule.dicom-video",displaySetsToDisplay:[b]},{namespace:"@ohif/extension-dicom-pdf.viewportModule.dicom-pdf",displaySetsToDisplay:[N]}],disableHeader:!0,viewerLayoutHeight:"100vh",viewportGridProps:{modeViewportPaneStyles:{ohifDisableBorder:!0}}}}}}],extensions:S,hangingProtocol:"rapidAxial",sopClassHandlers:[b,y,N,f],hotkeys:(n=o,function(e){if(Array.isArray(e))return v(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,o){if(e){if("string"==typeof e)return v(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,o):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())};var n},extensionDependencies:S}})(),i})()));