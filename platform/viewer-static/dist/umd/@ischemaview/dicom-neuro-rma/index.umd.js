!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("@ischemaview/dicom-neuro-rma",[],o):"object"==typeof exports?exports["@ischemaview/dicom-neuro-rma"]=o():e["@ischemaview/dicom-neuro-rma"]=o()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var e={d:(o,i)=>{for(var t in i)e.o(i,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:i[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>y});const i={1:{description:"Brain",window:"80",level:"40"},2:{description:"Subdural",window:"300",level:"100"},3:{description:"Stroke",window:"40",level:"40"},4:{description:"Soft Tissue",window:"400",level:"60"},5:{description:"Temporal Bones",window:"2800",level:"600"}},t=[{commandName:"setToolActive",commandOptions:{toolName:"Zoom"},label:"Zoom",keys:["z"],isEditable:!0},{commandName:"scaleUpViewport",label:"Zoom In",keys:["+"],isEditable:!0},{commandName:"scaleDownViewport",label:"Zoom Out",keys:["-"],isEditable:!0},{commandName:"fitViewportToWindow",label:"Zoom to Fit",keys:["="],isEditable:!0},{commandName:"rotateViewportCW",label:"Rotate Right",keys:["r"],isEditable:!0},{commandName:"rotateViewportCCW",label:"Rotate Left",keys:["l"],isEditable:!0},{commandName:"flipViewportHorizontal",label:"Flip Horizontally",keys:["h"],isEditable:!0},{commandName:"flipViewportVertical",label:"Flip Vertically",keys:["v"],isEditable:!0},{commandName:"toggleCine",label:"Cine",keys:["c"]},{commandName:"invertViewport",label:"Invert",keys:["i"],isEditable:!0},{commandName:"incrementActiveViewport",label:"Next Image Viewport",keys:["right"],isEditable:!0},{commandName:"decrementActiveViewport",label:"Previous Image Viewport",keys:["left"],isEditable:!0},{commandName:"nextViewportDisplaySet",label:"Next Series",keys:["pageup"],isEditable:!0},{commandName:"previousViewportDisplaySet",label:"Previous Series",keys:["pagedown"],isEditable:!0},{commandName:"nextImage",label:"Next Image",keys:["down"],isEditable:!0},{commandName:"previousImage",label:"Previous Image",keys:["up"],isEditable:!0},{commandName:"firstImage",label:"First Image",keys:["home"],isEditable:!0},{commandName:"lastImage",label:"Last Image",keys:["end"],isEditable:!0},{commandName:"resetViewport",label:"Reset",keys:["space"],isEditable:!0},{commandName:"cancelMeasurement",label:"Cancel Cornerstone Measurement",keys:["esc"]},{commandName:"setWindowLevel",commandOptions:i[1],label:"W/L Preset 1",keys:["1"]},{commandName:"setWindowLevel",commandOptions:i[2],label:"W/L Preset 2",keys:["2"]},{commandName:"setWindowLevel",commandOptions:i[3],label:"W/L Preset 3",keys:["3"]}];var n=JSON.parse('{"u2":"@ischemaview/dicom-neuro-rma"}').u2,a={axial:"rgba(0, 255, 240)",sagittal:"rgba(251, 62, 255)",coronal:"rgba(255, 214, 0)"};const r=function(e,o,i,t){!function(e,o,i,t){var n,r,s,l=e.getModuleEntry("@ohif/extension-cornerstone.utilityModule.tools"),c=o.services,d=c.ToolGroupService,m=c.CornerstoneViewportService,p=c.ViewportGridService,u=c.TrackingEventService,v=(c.toolbarService,l.exports),y=v.toolNames,b=v.Enums,f={active:[{toolName:y.Zoom,bindings:[{numTouchPoints:2}]},{toolName:y.WindowLevel,bindings:[{numTouchPoints:3}]},{toolName:y.StackScroll,bindings:[{mouseButton:b.MouseBindings.Primary}]},{toolName:y.StackScrollMouseWheel,bindings:[]}],passive:[{toolName:y.Pan}],disabled:[{toolName:y.Crosshairs}]},S=(n={},s={viewportIndicators:!1,autoPan:{enabled:!1,panSize:10},getReferenceLineColor:function(e){var o,i=m.getCornerstoneViewport(e);return a[null==i||null===(o=i.options)||void 0===o?void 0:o.orientation]},onDragHook:function(e){e.map((function(e){var o,i=e.data.viewportId,t=m.getCornerstoneViewport(i);t.element.style.border="4px solid ".concat(a[null==t||null===(o=t.options)||void 0===o?void 0:o.orientation])}))},onEndHook:function(){u.trackCrosshairChange(),console.log("crosshair end"),p.getState().viewports.map((function(e){var o,i=m.getCornerstoneViewport(e.viewportId);i.element.style.border="1px solid ".concat(a[null==i||null===(o=i.options)||void 0===o?void 0:o.orientation])}))},mobile:{enabled:!0,opacity:.5,handleRadius:9},jumpThreshold:30},(r=y.Crosshairs)in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n);d.createToolGroupAndAddTools("ctToolGroup",f,S)}(e,o)};var s,l;function c(e,o){(null==o||o>e.length)&&(o=e.length);for(var i=0,t=new Array(o);i<o;i++)t[i]=e[i];return t}!function(e){e.MIP="Mip",e.CROSSHAIR="Crosshairs",e.SLAB="Slab",e.WINDOW_LEVEL="WindowLevel",e.STACK_SCROLL="StackScroll"}(s||(s={})),function(e){e.PORTRAIT="portrait",e.LANDSCAPE="landscape"}(l||(l={}));var d="@ohif/extension-default.sopClassHandlerModule.stack",m="@ohif/extension-cornerstone-dicom-sr.sopClassHandlerModule.dicom-sr",p="@ohif/extension-dicom-video.sopClassHandlerModule.dicom-video",u="@ohif/extension-dicom-pdf.sopClassHandlerModule.dicom-pdf",v={"@ohif/extension-default":"^3.0.0","@ohif/extension-cornerstone":"^3.0.0","@ohif/extension-measurement-tracking":"^3.0.0","@ohif/extension-cornerstone-dicom-sr":"^3.0.0","@ohif/extension-dicom-pdf":"^3.0.1","@ohif/extension-dicom-video":"^3.0.1"};const y={id:n,modeFactory:function(e){var o,i,a;return e.modeConfiguration,{id:n,routeName:"neuroRMA",displayName:"Neuro RMA",onModeEnter:function(e){var o,i=e.servicesManager,t=e.extensionManager,n=e.commandsManager,a=(e.appConfig,i.services),l=a.ToolBarService,c=a.ToolGroupService,d=a.TouchService,m=a.CacheAPIService,p=a.MouseEventService,u=a.HangingProtocolService,v=a.OrientationService,y=a.stateSyncService;d.init(),m.init(),p.init(),v.init(),r(t,i),l.recordInteraction({groupId:"ctDisplaySet",itemId:"StackScroll",interactionType:"tool",commands:[{commandName:"setToolActive",commandOptions:{toolName:"StackScroll"},context:"CORNERSTONE"}]}),window.commandsManager=n,window.servicesManager=i;var b=c.subscribe(c.EVENTS.VIEWPORT_ADDED,(function(){if("mpr3"===u.protocol.id.split(".").slice(-1)[0].split("-")[0]){setTimeout((function(){l.recordInteraction({groupId:"ctToolGroup",itemId:"Crosshairs",interactionType:"tool",commands:[{commandName:"setToolActive",commandOptions:{toolName:"Crosshairs"},context:"CORNERSTONE"}]})}),50);var e={crosshairEnabled:!0,activeTool:s.CROSSHAIR};y.store({rapidIconState:e})}else{l.recordInteraction({groupId:"ctDisplaySet",itemId:"StackScroll",interactionType:"tool",commands:[{commandName:"setToolActive",commandOptions:{toolName:"StackScroll"},context:"CORNERSTONE"}]});var i={crosshairEnabled:!1,activateTool:s.STACK_SCROLL};y.store({rapidIconState:i})}o()}));o=b.unsubscribe,l.init(t)},onModeExit:function(e){var o=e.servicesManager.services,i=o.ToolGroupService,t=o.SyncGroupService,n=o.MeasurementService,a=o.ToolBarService,r=o.TouchService,s=o.CacheAPIService,l=o.OrientationService;a.reset(),n.clearMeasurements(),i.destroy(),t.destroy(),r.destroy(),s.destory(),l.destroy()},validationTags:{study:[],series:[]},isValidMode:function(e){return!e.modalities.split("\\").includes("SM")},routes:[{path:"neuroRMA",layoutTemplate:function(){return{id:"@ischemaview/dicom-rapidai-extension.layoutTemplateModule.viewerLayout",props:{colorTheme:"color-scheme-dark",deviceType:"MOBILE",rapidMode:"NEURO",viewports:[{namespace:"@ischemaview/dicom-rapidai-extension.viewportModule.rapidai-cornerstone-neuro-rma",displaySetsToDisplay:[d]},{namespace:"@ohif/extension-cornerstone-dicom-sr.viewportModule.dicom-sr",displaySetsToDisplay:[m]},{namespace:"@ohif/extension-dicom-video.viewportModule.dicom-video",displaySetsToDisplay:[p]},{namespace:"@ohif/extension-dicom-pdf.viewportModule.dicom-pdf",displaySetsToDisplay:[u]}],viewerLayoutHeight:"100vh",viewportGridProps:{modeViewportPaneStyles:function(e){return e.numViewports,{ohifDisableBorder:!0}}}}}}}],extensions:v,hangingProtocol:null!==(o=window)&&void 0!==o&&null!==(i=o.matchMedia("(orientation: portrait)"))&&void 0!==i&&i.matches?"@ischemaview/dicom-rapidai-extension.hangingProtocolModule.mpr3-vertical":"@ischemaview/dicom-rapidai-extension.hangingProtocolModule.mpr3-horizontal",sopClassHandlers:[p,d,u,m],hotkeys:(a=t,function(e){if(Array.isArray(e))return c(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,o){if(e){if("string"==typeof e)return c(e,o);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,o):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},extensionDependencies:v};return o})()));