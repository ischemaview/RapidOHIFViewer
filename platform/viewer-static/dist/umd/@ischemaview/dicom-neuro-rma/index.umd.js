!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(require("@ohif/ui")):"function"==typeof define&&define.amd?define("@ischemaview/dicom-neuro-rma",["@ohif/ui"],o):"object"==typeof exports?exports["@ischemaview/dicom-neuro-rma"]=o(require("@ohif/ui")):e["@ischemaview/dicom-neuro-rma"]=o(e["@ohif/ui"])}("undefined"!=typeof self?self:this,(e=>(()=>{"use strict";var o={214:o=>{o.exports=e}},t={};function i(e){var n=t[e];if(void 0!==n)return n.exports;var a=t[e]={exports:{}};return o[e](a,a.exports,i),a.exports}i.d=(e,o)=>{for(var t in o)i.o(o,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},i.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{i.r(n),i.d(n,{default:()=>O});const e={1:{description:"Brain",window:"80",level:"40"},2:{description:"Subdural",window:"300",level:"100"},3:{description:"Stroke",window:"40",level:"40"},4:{description:"Soft Tissue",window:"400",level:"60"},5:{description:"Temporal Bones",window:"2800",level:"600"}},o=[{commandName:"setToolActive",commandOptions:{toolName:"Zoom"},label:"Zoom",keys:["z"],isEditable:!0},{commandName:"scaleUpViewport",label:"Zoom In",keys:["+"],isEditable:!0},{commandName:"scaleDownViewport",label:"Zoom Out",keys:["-"],isEditable:!0},{commandName:"fitViewportToWindow",label:"Zoom to Fit",keys:["="],isEditable:!0},{commandName:"rotateViewportCW",label:"Rotate Right",keys:["r"],isEditable:!0},{commandName:"rotateViewportCCW",label:"Rotate Left",keys:["l"],isEditable:!0},{commandName:"flipViewportHorizontal",label:"Flip Horizontally",keys:["h"],isEditable:!0},{commandName:"flipViewportVertical",label:"Flip Vertically",keys:["v"],isEditable:!0},{commandName:"toggleCine",label:"Cine",keys:["c"]},{commandName:"invertViewport",label:"Invert",keys:["i"],isEditable:!0},{commandName:"incrementActiveViewport",label:"Next Image Viewport",keys:["right"],isEditable:!0},{commandName:"decrementActiveViewport",label:"Previous Image Viewport",keys:["left"],isEditable:!0},{commandName:"nextViewportDisplaySet",label:"Next Series",keys:["pageup"],isEditable:!0},{commandName:"previousViewportDisplaySet",label:"Previous Series",keys:["pagedown"],isEditable:!0},{commandName:"nextImage",label:"Next Image",keys:["down"],isEditable:!0},{commandName:"previousImage",label:"Previous Image",keys:["up"],isEditable:!0},{commandName:"firstImage",label:"First Image",keys:["home"],isEditable:!0},{commandName:"lastImage",label:"Last Image",keys:["end"],isEditable:!0},{commandName:"resetViewport",label:"Reset",keys:["space"],isEditable:!0},{commandName:"cancelMeasurement",label:"Cancel Cornerstone Measurement",keys:["esc"]},{commandName:"setWindowLevel",commandOptions:e[1],label:"W/L Preset 1",keys:["1"]},{commandName:"setWindowLevel",commandOptions:e[2],label:"W/L Preset 2",keys:["2"]},{commandName:"setWindowLevel",commandOptions:e[3],label:"W/L Preset 3",keys:["3"]}];var t=JSON.parse('{"u2":"@ischemaview/dicom-neuro-rma"}').u2,a=i(214);function r(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o&&(i=i.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?r(Object(t),!0).forEach((function(o){l(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function l(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function m(e,o,t,i,n,a){return{id:o,icon:t,label:i,type:e,commands:n,tooltip:a}}var c=m.bind(null,"action"),d=(m.bind(null,"toggle"),m.bind(null,"tool"));function p(o,t,i){return{id:o.toString(),title:t,subtitle:i,type:"action",commands:[{commandName:"setWindowLevel",commandOptions:s({},e[o]),context:"CORNERSTONE"}]}}function u(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,i=new Array(o);t<o;t++)i[t]=e[t];return i}var v="@ohif/extension-default.sopClassHandlerModule.stack",N="@ohif/extension-cornerstone-dicom-sr.sopClassHandlerModule.dicom-sr",y="@ohif/extension-dicom-video.sopClassHandlerModule.dicom-video",b="@ohif/extension-dicom-pdf.sopClassHandlerModule.dicom-pdf",f={"@ohif/extension-default":"^3.0.0","@ohif/extension-cornerstone":"^3.0.0","@ohif/extension-measurement-tracking":"^3.0.0","@ohif/extension-cornerstone-dicom-sr":"^3.0.0","@ohif/extension-dicom-pdf":"^3.0.1","@ohif/extension-dicom-video":"^3.0.1"};const O={id:t,modeFactory:function(e){return e.modeConfiguration,{id:t,routeName:"neuroRMA",displayName:"Neuro RMA",onModeEnter:function(e){var o,t=e.servicesManager,i=e.extensionManager,n=e.commandsManager,r=t.services,s=r.ToolBarService,l=r.ToolGroupService,m=r.SlabThicknessService,u=r.TouchService,v=r.CacheAPIService;m.init(),u.init(),v.init(),function(e,o,t){!function(e,o,t){var i=e.getModuleEntry("@ohif/extension-cornerstone.utilityModule.tools").exports,n=i.toolNames,a=i.Enums,r={active:[{toolName:n.Zoom,bindings:[{numTouchPoints:2}]},{toolName:n.StackScroll,bindings:[{numTouchPoints:3}]},{toolName:n.WindowLevel,bindings:[{mouseButton:a.MouseBindings.Primary}]},{toolName:n.StackScrollMouseWheel,bindings:[]}],passive:[{toolName:n.Pan}]};o.createToolGroupAndAddTools("default",r,{})}(e,o)}(i,l),window.commandsManager=n,window.servicesManager=t;var N=l.subscribe(l.EVENTS.VIEWPORT_ADDED,(function(){s.recordInteraction({groupId:"WindowLevel",itemId:"WindowLevel",interactionType:"tool",commands:[{commandName:"setToolActive",commandOptions:{toolName:"WindowLevel"},context:"CORNERSTONE"}]}),o()}));o=N.unsubscribe,s.init(i),s.addButtons(function(e){var o=e.servicesManager.services.SlabThicknessService;return[{id:"MeasurementTools",type:"ohif.splitButton",props:{groupId:"MeasurementTools",isRadio:!0,primary:d("Length","tool-length","Length",[{commandName:"setToolActive",commandOptions:{toolName:"Length"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SRLength",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Length"),secondary:{icon:"chevron-down",label:"",isActive:!0,tooltip:"More Measure Tools"},items:[d("Length","tool-length","Length",[{commandName:"setToolActive",commandOptions:{toolName:"Length"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SRLength",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Length Tool"),d("Bidirectional","tool-bidirectional","Bidirectional",[{commandName:"setToolActive",commandOptions:{toolName:"Bidirectional"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SRBidirectional",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Bidirectional Tool"),d("ArrowAnnotate","tool-annotate","Annotation",[{commandName:"setToolActive",commandOptions:{toolName:"ArrowAnnotate"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SRArrowAnnotate",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Arrow Annotate"),d("EllipticalROI","tool-elipse","Ellipse",[{commandName:"setToolActive",commandOptions:{toolName:"EllipticalROI"},context:"CORNERSTONE"},{commandName:"setToolActive",commandOptions:{toolName:"SREllipticalROI",toolGroupId:"SRToolGroup"},context:"CORNERSTONE"}],"Ellipse Tool")]}},{id:"WindowLevel",type:"ohif.splitButton",props:{groupId:"WindowLevel",primary:d("WindowLevel","tool-window-level","Window Level",[{commandName:"setToolActive",commandOptions:{toolName:"WindowLevel"},context:"CORNERSTONE"}],"Window Level"),secondary:{icon:"chevron-down",label:"W/L Manual",isActive:!0,tooltip:"W/L Presets"},isAction:!0,renderer:a.WindowLevelMenuItem,items:[p(1,"Brain","80 / 40"),p(2,"Subdural","300 / 100"),p(3,"Stroke","40 / 40"),p(4,"Soft Tissue","400 / 60"),p(5,"Temporal Bones","2850 / 600")]}},{id:"Pan",type:"ohif.radioGroup",props:{type:"tool",icon:"tool-move",label:"Pan",commands:[{commandName:"setToolActive",commandOptions:{toolName:"Pan"},context:"CORNERSTONE"}]}},{id:"MoreTools",type:"ohif.splitButton",props:{isRadio:!0,groupId:"MoreTools",primary:c("Reset","tool-reset","Reset View",[{commandName:"resetViewport",commandOptions:{},context:"CORNERSTONE"}],"Reset"),secondary:{icon:"chevron-down",label:"",isActive:!0,tooltip:"More Tools"},items:[c("Reset","tool-reset","Reset View",[{commandName:"resetViewport",commandOptions:{},context:"CORNERSTONE"}],"Reset"),c("Zoom","tool-zoom","Zoom",[{commandName:"setToolActive",commandOptions:{toolName:"Zoom"},context:"CORNERSTONE"}],"Zoom"),c("Pan","tool-move","Pan",[{commandName:"setToolActive",commandOptions:{toolName:"Pan"},context:"CORNERSTONE"}],"Pan"),c("Stack-Scroll","tool-stack-scroll","Stack Scroll",[{commandName:"setToolActive",commandOptions:{toolName:"StackScroll"},context:"CORNERSTONE"}],"Stack Scroll")]}},{id:"setSlabThickness",type:"rapidai.range",props:{icon:"tool-crosshair",label:"Thickness",type:"action",min:0,max:30,value:.05,onChange:function(e){o.setSlabThickness(+e)}}}]}({servicesManager:t})),s.createButtonSection("primary",["WindowLevel","MoreTools"])},onModeExit:function(e){var o=e.servicesManager.services,t=o.ToolGroupService,i=o.SyncGroupService,n=o.MeasurementService,a=o.ToolBarService,r=o.SlabThicknessService,s=o.TouchService,l=o.CacheAPIService;a.reset(),n.clearMeasurements(),t.destroy(),i.destroy(),r.destroy(),s.destroy(),l.destory()},validationTags:{study:[],series:[]},isValidMode:function(e){return!e.modalities.split("\\").includes("SM")},routes:[{path:"neuroRMA",layoutTemplate:function(){return{id:"@ohif/extension-default.layoutTemplateModule.viewerLayout",props:{viewports:[{namespace:"@ischemaview/dicom-rapidai-extension.viewportModule.rapidai-cornerstone-neuro-rma",displaySetsToDisplay:[v]},{namespace:"@ohif/extension-cornerstone-dicom-sr.viewportModule.dicom-sr",displaySetsToDisplay:[N]},{namespace:"@ohif/extension-dicom-video.viewportModule.dicom-video",displaySetsToDisplay:[y]},{namespace:"@ohif/extension-dicom-pdf.viewportModule.dicom-pdf",displaySetsToDisplay:[b]}],disableHeader:!0,viewerLayoutHeight:"100vh",viewportGridProps:{modeViewportPaneStyles:{ohifDisableBorder:!0}}}}}}],extensions:f,hangingProtocol:"rapidDefault",sopClassHandlers:[y,v,b,N],hotkeys:(i=o,function(e){if(Array.isArray(e))return u(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,o){if(e){if("string"==typeof e)return u(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,o):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())};var i},extensionDependencies:f}})(),n})()));