!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("@ischemaview/dicom-anr-rwa",[],o):"object"==typeof exports?exports["@ischemaview/dicom-anr-rwa"]=o():e["@ischemaview/dicom-anr-rwa"]=o()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var e={d:(o,i)=>{for(var t in i)e.o(i,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:i[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>y});const i={1:{description:"Brain",window:"80",level:"40"},2:{description:"Subdural",window:"300",level:"100"},3:{description:"Stroke",window:"40",level:"40"},4:{description:"Soft Tissue",window:"400",level:"60"},5:{description:"Temporal Bones",window:"2800",level:"600"}},t=[{commandName:"setToolActive",commandOptions:{toolName:"Zoom"},label:"Zoom",keys:["z"],isEditable:!0},{commandName:"scaleUpViewport",label:"Zoom In",keys:["+"],isEditable:!0},{commandName:"scaleDownViewport",label:"Zoom Out",keys:["-"],isEditable:!0},{commandName:"fitViewportToWindow",label:"Zoom to Fit",keys:["="],isEditable:!0},{commandName:"rotateViewportCW",label:"Rotate Right",keys:["r"],isEditable:!0},{commandName:"rotateViewportCCW",label:"Rotate Left",keys:["l"],isEditable:!0},{commandName:"flipViewportHorizontal",label:"Flip Horizontally",keys:["h"],isEditable:!0},{commandName:"flipViewportVertical",label:"Flip Vertically",keys:["v"],isEditable:!0},{commandName:"toggleCine",label:"Cine",keys:["c"]},{commandName:"invertViewport",label:"Invert",keys:["i"],isEditable:!0},{commandName:"incrementActiveViewport",label:"Next Image Viewport",keys:["right"],isEditable:!0},{commandName:"decrementActiveViewport",label:"Previous Image Viewport",keys:["left"],isEditable:!0},{commandName:"nextViewportDisplaySet",label:"Next Series",keys:["pageup"],isEditable:!0},{commandName:"previousViewportDisplaySet",label:"Previous Series",keys:["pagedown"],isEditable:!0},{commandName:"nextImage",label:"Next Image",keys:["down"],isEditable:!0},{commandName:"previousImage",label:"Previous Image",keys:["up"],isEditable:!0},{commandName:"firstImage",label:"First Image",keys:["home"],isEditable:!0},{commandName:"lastImage",label:"Last Image",keys:["end"],isEditable:!0},{commandName:"resetViewport",label:"Reset",keys:["space"],isEditable:!0},{commandName:"cancelMeasurement",label:"Cancel Cornerstone Measurement",keys:["esc"]},{commandName:"setWindowLevel",commandOptions:i[1],label:"W/L Preset 1",keys:["1"]},{commandName:"setWindowLevel",commandOptions:i[2],label:"W/L Preset 2",keys:["2"]},{commandName:"setWindowLevel",commandOptions:i[3],label:"W/L Preset 3",keys:["3"]}];var n=JSON.parse('{"u2":"@ischemaview/dicom-anr-rwa"}').u2,r={axial:"rgba(0, 255, 240)",sagittal:"rgba(251, 62, 255)",coronal:"rgba(255, 214, 0)"};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}const s=function(e,o,i,t){!function(e,o,i,t){var n,s,l,c=e.getModuleEntry("@ohif/extension-cornerstone.utilityModule.tools"),d=o.services,m=d.ToolGroupService,p=d.CornerstoneViewportService,u=d.ViewportGridService,v=d.TrackingEventService,y=(d.toolbarService,c.exports),b=y.toolNames,f=y.Enums,S={active:[{toolName:b.Zoom,bindings:[{numTouchPoints:2}]},{toolName:b.WindowLevel,bindings:[{numTouchPoints:3}]},{toolName:b.StackScroll,bindings:[{mouseButton:f.MouseBindings.Primary}]},{toolName:b.StackScrollMouseWheel,bindings:[]}],passive:[{toolName:b.Pan}],disabled:[{toolName:b.Crosshairs}]},w=(n={},l={viewportIndicators:!1,autoPan:{enabled:!1,panSize:10},getReferenceLineColor:function(e){var o,i=p.getCornerstoneViewport(e);return r[null==i||null===(o=i.options)||void 0===o?void 0:o.orientation]},onDragHook:function(e){e.map((function(e){var o,i=e.data.viewportId,t=p.getCornerstoneViewport(i);t.element.style.border="4px solid ".concat(r[null==t||null===(o=t.options)||void 0===o?void 0:o.orientation])}))},onEndHook:function(){v.trackCrosshairChange(),u.getState().viewports.map((function(e){var o,i=p.getCornerstoneViewport(e.viewportId);i.element.style.border="1px solid ".concat(r[null==i||null===(o=i.options)||void 0===o?void 0:o.orientation])}))},mobile:{enabled:!0,opacity:.5,handleRadius:9},jumpThreshold:30},(s=function(e){var o=function(e,o){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var t=i.call(e,"string");if("object"!==a(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(o)?o:String(o)}(s=b.Crosshairs))in n?Object.defineProperty(n,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[s]=l,n);m.createToolGroupAndAddTools("ctToolGroup",S,w)}(e,o)};var l=function(e){return e.MIP="Mip",e.CROSSHAIR="Crosshairs",e.SLAB="Slab",e.WINDOW_LEVEL="WindowLevel",e.STACK_SCROLL="StackScroll",e}(l||{});function c(e,o){(null==o||o>e.length)&&(o=e.length);for(var i=0,t=new Array(o);i<o;i++)t[i]=e[i];return t}var d="@ohif/extension-default.sopClassHandlerModule.stack",m="@ohif/extension-cornerstone-dicom-sr.sopClassHandlerModule.dicom-sr",p="@ohif/extension-dicom-video.sopClassHandlerModule.dicom-video",u="@ohif/extension-dicom-pdf.sopClassHandlerModule.dicom-pdf",v={"@ohif/extension-default":"^3.0.0","@ohif/extension-cornerstone":"^3.0.0","@ohif/extension-measurement-tracking":"^3.0.0","@ohif/extension-cornerstone-dicom-sr":"^3.0.0","@ohif/extension-dicom-pdf":"^3.0.1","@ohif/extension-dicom-video":"^3.0.1"};const y={id:n,modeFactory:function(e){var o,i,r;return e.modeConfiguration,{id:n,routeName:"anrRWA",displayName:"ANR RWA",onModeEnter:function(e){var o,i=e.servicesManager,t=e.extensionManager,n=e.commandsManager,r=(e.appConfig,i.services),a=r.ToolBarService,c=r.ToolGroupService,d=r.TouchService,m=r.CacheAPIService,p=r.MouseEventService,u=r.HangingProtocolService,v=r.cornerstoneCacheService,y=r.SlabSelectorService,b=r.OrientationService,f=r.stateSyncService;d.init(),m.init(),p.init(),b.init(),v.setMaxFramesInVolume(1/0),y.setSlabSize(1/0),s(t,i),a.recordInteraction({groupId:"ctDisplaySet",itemId:"StackScroll",interactionType:"tool",commands:[{commandName:"setToolActive",commandOptions:{toolName:"StackScroll"},context:"CORNERSTONE"}]}),window.commandsManager=n,window.servicesManager=i;var S=c.subscribe(c.EVENTS.VIEWPORT_ADDED,(function(){if("mpr3"===u.protocol.id.split(".").slice(-1)[0].split("-")[0]){setTimeout((function(){a.recordInteraction({groupId:"ctToolGroup",itemId:"Crosshairs",interactionType:"tool",commands:[{commandName:"setToolActive",commandOptions:{toolName:"Crosshairs"},context:"CORNERSTONE"}]})}),50);var e={crosshairEnabled:!0,activeTool:l.CROSSHAIR};f.store({rapidIconState:e})}else{a.recordInteraction({groupId:"ctDisplaySet",itemId:"StackScroll",interactionType:"tool",commands:[{commandName:"setToolActive",commandOptions:{toolName:"StackScroll"},context:"CORNERSTONE"}]});var i={crosshairEnabled:!1,activateTool:l.STACK_SCROLL};f.store({rapidIconState:i})}o()}));o=S.unsubscribe,a.init(t)},onModeExit:function(e){var o=e.servicesManager.services,i=o.ToolGroupService,t=o.SyncGroupService,n=o.MeasurementService,r=o.ToolBarService,a=o.TouchService,s=o.CacheAPIService,l=o.OrientationService;r.reset(),n.clearMeasurements(),i.destroy(),t.destroy(),a.destroy(),s.destory(),l.destroy()},validationTags:{study:[],series:[]},isValidMode:function(e){return!e.modalities.split("\\").includes("SM")},routes:[{path:"anrRWA",layoutTemplate:function(){return{id:"@ischemaview/dicom-rapidai-extension.layoutTemplateModule.viewerLayout",props:{colorTheme:"color-scheme-dark",deviceType:"DESKTOP",rapidMode:"ANR",viewports:[{namespace:"@ischemaview/dicom-rapidai-extension.viewportModule.rapidai-cornerstone-anr-rwa",displaySetsToDisplay:[d]},{namespace:"@ohif/extension-cornerstone-dicom-sr.viewportModule.dicom-sr",displaySetsToDisplay:[m]},{namespace:"@ohif/extension-dicom-video.viewportModule.dicom-video",displaySetsToDisplay:[p]},{namespace:"@ohif/extension-dicom-pdf.viewportModule.dicom-pdf",displaySetsToDisplay:[u]}],viewerLayoutHeight:"100vh",viewportGridProps:{modeViewportPaneStyles:function(e){return e.numViewports,{ohifDisableBorder:!0}}}}}}}],extensions:v,hangingProtocol:null!==(o=window)&&void 0!==o&&null!==(i=o.matchMedia("(orientation: portrait)"))&&void 0!==i&&i.matches?"@ischemaview/dicom-rapidai-extension.hangingProtocolModule.mpr3-vertical":"@ischemaview/dicom-rapidai-extension.hangingProtocolModule.mpr3-horizontal",sopClassHandlers:[p,d,u,m],hotkeys:(r=t,function(e){if(Array.isArray(e))return c(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,o){if(e){if("string"==typeof e)return c(e,o);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,o):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},extensionDependencies:v};return o})()));